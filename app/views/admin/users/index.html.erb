<% content_for :title, "Danh sách người dùng" %>
<div class="card">
      <div class="card-header">
        <h3>Danh sách người dùng</h3>
      </div>
      <div class="card-body mx-2">
        <%= link_to "Thêm mới", new_admin_user_path(), class: "btn btn-primary" %>
        <div class="csv-wrapper">
          <%= link_to 'Export CSV', admin_users_path(format: :csv), class: "btn btn-primary" %>
          <%= form_with url: import_admin_users_path, method: :post, local: true, html: { multipart: true } do |f| %>
            <div class="form-group">
              <%= f.file_field :file, class: "form-control d-none", id: "csv-file-input" %>
              <button type="button" class="btn btn-secondary" id="trigger-file-upload">
                Chọn file
              </button>
            </div>
            <%= f.submit "Import CSV", class: "btn btn-primary" %>
          <% end %>
        </div>
        <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Email</th>
                <th scope="col">User Name</th>
                <th scope="col">Avatar</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody>
              <% @users.each do |user| %>
                  <tr>
                      <td><%= user.id - 1 %></td>
                      <td><%= user.email %></td>
                      <td><%= user.user_name %></td>
                      <td><%= image_tag(user.avatar, size: "50x50") if user.avatar.present? %></td>
                      <td>
                        <%= link_to edit_admin_user_path(user), class: "btn btn-primary btn-sm" do %>
                          <%= icon('fa', 'pen')%>
                        <% end %>
                        <%= button_to admin_user_path(user), method: :delete, data: { turbo_confirm: "Are you sure?" }, form: { class: 'd-inline-block' }, class: "btn btn-danger btn-sm" do %>
                          <%= icon('fa', 'trash')%>
                        <% end %>
                      </td>
                  </tr>
              <% end %>
            </tbody>
            
          </table>
          <%= paginate @users, params: request.query_parameters, param_name: :page, url: admin_users_path %>
      </div>
    </div>

<%= javascript_include_tag "packs/user", "data-turbo-track": "reload", defer: true %>